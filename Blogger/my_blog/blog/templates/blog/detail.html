{% extends 'blog/base.html' %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}  
    <div class="border p-3 mb-4">
        <img class="img-fluid rounded-circle" width="70px" src="{{post.author.profile.image.url}}" alt="">
        <span class="text-secondary">نشر في تاريخ {{ post.post_date|date:'d-m-Y' }}</span>
        {% if post.author == user  %}
        <div class="form-group btn-editing p-3 "  style="position: absolute; top:0; left: 0;">
            <a  class="btn btn-secondary" href="{% url 'update_post' post.id  %}" > تحرير </a>
            <a  class="btn btn-danger"  href="{% url 'delete_post' post.id  %}"> حذف </a>
        </div>
        {% endif %}
        <h3 class="title-of-title">{{ post.title }}</h3>
        <p>{{ post.content }}</p>
    </div>
    <h2 class="border-bottom mt-5 mb-3">التعليقات ({{ comments.count }})</h2>
    {% if comments %}
        {% for comment in comments %}
            <div class="mb-3 p-3 comment">
                <h6 class="border-bottom p-2">{{ comment.name }}<span> في {{ comment.comment_date|date:'d-m-Y' }}</span></h6>
                <p class="mb-0">{{ comment.body }}</p>
            </div>
        {% endfor %}
    {% else %}
        <div class="text-center mb-3 p-4 comment">
            <h5 class="mb-0">لا يوجد تعليقات</h5>
        </div>
    {% endif %}
    {% if user.is_authenticated   %}
    <h3 class="border-bottom pb-3 mb-3 mt-5">اضافة تعليق جديد</h3>
    <form method="POST" action="">
        {% csrf_token %}
        {{comment_form|crispy}}
        <input class="btn btn-secondary mb-4" type="submit" value="نشر التعليق">
    </form>
    {% endif %}

{% endblock %}
